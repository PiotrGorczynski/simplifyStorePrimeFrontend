<p-toast></p-toast>
<div class="login-container flex min-h-screen surface-ground">
  <div class="login-form-section flex align-items-start justify-content-center col-12 lg:col-5 pt-6 px-5 lg:px-8 bg-white shadow-7 relative z-2">
    <div class="w-full mt-1" style="max-width: 400px;">
      <div class="flex justify-content-center mt-1 mb-1">
        <img [src]="getLogoPath()"
             alt="Simplify Store Prime"
             class="h-auto cursor-pointer"
             style="max-width: 280px;"
             (click)="toggleTheme()"
             pTooltip="Click to toggle theme"
             tooltipPosition="bottom">
      </div>

      <div class="text-center mb-4">
        <h2 class="text-900 font-bold text-3xl mb-2">Create Account</h2>
      </div>

      <div class="flex flex-column gap-3">
        <div class="flex flex-column gap-2">
          <label for="username" class="font-bold text-900">Username</label>
          <input
            pInputText
            id="username"
            type="text"
            [(ngModel)]="username"
            placeholder="Choose a username"
            class="w-full p-inputtext-lg"
            [class.ng-invalid]="usernameTouched && !username"
            [class.ng-dirty]="usernameTouched"
            (blur)="usernameTouched = true" />
          <small *ngIf="usernameTouched && !username" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Username is required
          </small>
        </div>

        <div class="flex flex-column gap-2">
          <label for="email" class="font-bold text-900">Email Address</label>
          <input
            pInputText
            id="email"
            type="email"
            [(ngModel)]="email"
            placeholder="Enter your email"
            class="w-full p-inputtext-lg"
            [class.ng-invalid]="emailTouched && !isValidEmail()"
            [class.ng-dirty]="emailTouched"
            (blur)="emailTouched = true" />
          <small *ngIf="emailTouched && !email" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Email is required
          </small>
          <small *ngIf="emailTouched && email && !isValidEmail()" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Please enter a valid email
          </small>
        </div>

        <div class="flex flex-column gap-2">
          <label for="password" class="font-bold text-900">Password</label>
          <p-password
            id="password"
            [(ngModel)]="password"
            [toggleMask]="true"
            [feedback]="true"
            placeholder="Create a password"
            styleClass="w-full"
            inputStyleClass="w-full p-inputtext-lg"
            (onBlur)="passwordTouched = true">
          </p-password>
          <small *ngIf="passwordTouched && !password" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Password is required
          </small>
          <small *ngIf="passwordTouched && password && password.length < 6" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Password must be at least 6 characters
          </small>
        </div>

        <div class="flex flex-column gap-2">
          <label for="confirmPassword" class="font-bold text-900">Confirm Password</label>
          <p-password
            id="confirmPassword"
            [(ngModel)]="confirmPassword"
            [toggleMask]="true"
            [feedback]="false"
            placeholder="Confirm your password"
            styleClass="w-full"
            inputStyleClass="w-full p-inputtext-lg"
            (onBlur)="confirmPasswordTouched = true">
          </p-password>
          <small *ngIf="confirmPasswordTouched && !confirmPassword" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Please confirm your password
          </small>
          <small *ngIf="confirmPasswordTouched && confirmPassword && !passwordsMatch()" class="text-red-500">
            <i class="pi pi-exclamation-circle mr-1"></i>Passwords do not match
          </small>
        </div>

        <p-button
          label="Create Account"
          icon="pi pi-user-plus"
          styleClass="w-full p-button-lg shadow-2 custom-blue-button mt-2"
          [disabled]="!isFormValid() || isLoading"
          [loading]="isLoading"
          (onClick)="onSubmit()">
        </p-button>

        <div class="text-center text-600 font-medium mt-2">
          Already have an account?
          <a routerLink="/login" class="font-bold cursor-pointer text-primary no-underline hover:underline transition-all custom-blue-link">
            Log in
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="login-image-section hidden lg:block col-7 p-0 overflow-hidden relative z-1">
    <img src="login-background.jpg" alt="Background" class="h-full w-full absolute top-0 left-0" style="object-fit: cover;">
    <div class="absolute top-0 left-0 w-full h-full bg-black-alpha-10"></div>
  </div>
</div>
